<mat-toolbar color="primary">
  <mat-icon aria-hidden="true">local_bar</mat-icon>
  <span class="toolbar-title">Cocktails</span>
</mat-toolbar>


<div class="filters-container">
  <mat-slide-toggle [checked]="store.displayFavored()" (change)="store.toggleDisplayFavored()">Display only favored cocktails</mat-slide-toggle>
</div>

<div class="filters-container">
  <app-search (search)="onSearchName($event)"></app-search>
  <app-ingredient-search (search)="onSearchByIngredient($event)"></app-ingredient-search>
  <app-id-search (search)="onSearchById($event)"></app-id-search>
</div>

<mat-card class="card">
  <div #scrollContainer class="scroll-container" (scroll)="onScroll($event)">
    <table mat-table [dataSource]="store.displayedDrinks()" class="mat-elevation-z1">
      <!-- Actions Column (context menu) -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="col-actions"></th>
        <td mat-cell *matCellDef="let row" class="col-actions">
          <button mat-icon-button matSuffix aria-label="Open menu" [matMenuTriggerFor]="menu">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="seeDetails(row)">
              <mat-icon>visibility</mat-icon>
              <span>See details</span>
            </button>
            <button mat-menu-item (click)="store.toggleFavorite(row.idDrink)">
              <mat-icon>{{ store.isFavorited(row.idDrink) ? 'favorite' : 'favorite_border' }}</mat-icon>
              <span>Favorite</span>
            </button>
          </mat-menu>
        </td>
      </ng-container>

      <!-- ID Column -->
      <ng-container matColumnDef="idDrink">
        <th mat-header-cell *matHeaderCellDef class="col-id">ID</th>
        <td mat-cell *matCellDef="let row" class="col-id">{{ row.idDrink }}</td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="strDrink">
        <th mat-header-cell *matHeaderCellDef class="col-name">Name</th>
        <td mat-cell *matCellDef="let row" class="col-name">{{ row.strDrink }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    @if (!store.loading() && store.displayedDrinks().length === 0) {
      <div class="empty">No results.</div>
    }

    <div #sentinel class="sentinel" aria-hidden="true"></div>
  </div>

  @if (store.loading()) {
    <div class="loading">
      <mat-progress-spinner mode="indeterminate" diameter="32"></mat-progress-spinner>
      <span>Loadingâ€¦</span>
    </div>
  }
</mat-card>

